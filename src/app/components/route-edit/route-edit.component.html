<div style="padding: 20px" *ngIf="loading">
  <div class="spinner">
  </div>
</div>
<div class="container-fluid d-flex flex-column align-items-center route-add-div" *ngIf="!loading">
  <div class="route-add-blur-bg">
    <div class="your-routes-header mt-5 mb-1">
      <h2><img class="title_btn" src="assets/images/zielony_samochod.png">Edycja oferty przejazdu </h2>
    </div>

    <div class="route-add-form d-flex flex-column">
      <form [formGroup]="editRouteForm">

        <h4 class="header4 mt-3 mb-4">Zmień informacje o oferowanym przejeździe</h4>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label mt-2">Data przejazdu</label>
          <div class="col-sm-8">
            <input type="date" class="form-control" name="travelDate" formControlName="travelDate" required>

            <div
              *ngIf="editRouteForm.get('travelDate').invalid && editRouteForm.get('travelDate').touched"
              class="alert alert-danger">

              <div *ngIf="editRouteForm.get('travelDate').hasError('required')">
                Pole jest wymagane
              </div>
            </div>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label">Miejscowość od</label>
          <div class="col-sm-8">
            <input type="text" name="cityFrom" class="form-control" formControlName="cityFrom" required>

            <div
              *ngIf="editRouteForm.get('cityFrom').invalid && editRouteForm.get('cityFrom').touched"
              class="alert alert-danger">

              <div *ngIf="editRouteForm.get('cityFrom').hasError('required')">
                Pole jest wymagane
              </div>
              <div *ngIf="editRouteForm.get('cityFrom').hasError('minlength')">
                Pole musi mieć conajmniej 3 znaki
              </div>
            </div>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label">Miejscowość do</label>
          <div class="col-sm-8">
            <input type="text" name="cityTo" class="form-control" formControlName="cityTo" required>

            <div
              *ngIf="editRouteForm.get('cityTo').invalid && editRouteForm.get('cityTo').touched"
              class="alert alert-danger">

              <div *ngIf="editRouteForm.get('cityTo').hasError('required')">
                Pole jest wymagane
              </div>
              <div *ngIf="editRouteForm.get('cityTo').hasError('minlength')">
                Pole musi mieć conajmniej 3 znaki
              </div>
            </div>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label">Cena za przejazd</label>
          <div class="col-sm-8">
            <div class="input-group">
              <input type="number" name="routPrice" class="form-control col-sm-7" formControlName="routPrice"
                     required>
              <div class="input-group-append">
                <span class="input-group-text">PLN</span>
              </div>
            </div>
          </div>
          <div class="col-sm-5 offset-md-4">
            <div
              *ngIf="editRouteForm.get('routPrice').invalid && editRouteForm.get('routPrice').touched"
              class="alert alert-danger">

              <div *ngIf="editRouteForm.get('routPrice').hasError('required')">
                Pole jest wymagane
              </div>
              <div *ngIf="editRouteForm.get('routPrice').hasError('min')">
                Pole musi mieć wartość minimum 0.01
              </div>
            </div>
          </div>
        </div>

        <h4 class="header4 mt-3 mb-4">Zmień informacje o swoim samochodzie</h4>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label">Marka</label>
          <div class="col-sm-8">
            <input type="text" name="carModel" class="form-control" formControlName="carModel" required>

            <div
              *ngIf="editRouteForm.get('carModel').invalid && editRouteForm.get('carModel').touched"
              class="alert alert-danger">

              <div *ngIf="editRouteForm.get('carModel').hasError('required')">
                Pole jest wymagane
              </div>
              <div *ngIf="editRouteForm.get('carModel').hasError('minlength')">
                Pole musi mieć conajmniej 3 znaki
              </div>
            </div>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label">Model</label>
          <div class="col-sm-8">
            <input type="text" name="carMake" class="form-control" formControlName="carMake" required>

            <div
              *ngIf="editRouteForm.get('carMake').invalid && editRouteForm.get('carMake').touched"
              class="alert alert-danger">

              <div *ngIf="editRouteForm.get('carMake').hasError('required')">
                Pole jest wymagane
              </div>
              <div *ngIf="editRouteForm.get('carMake').hasError('minlength')">
                Pole musi mieć conajmniej 3 znaki
              </div>
            </div>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label">Numer rejestracyjny pojazdu</label>
          <div class="col-sm-8">
            <input type="text" name="carNo" class="form-control" formControlName="carNo" required>
            <div
              *ngIf="editRouteForm.get('carNo').invalid && editRouteForm.get('carNo').touched"
              class="alert alert-danger">

              <div *ngIf="editRouteForm.get('carNo').hasError('required')">
                Pole jest wymagane
              </div>
              <div *ngIf="editRouteForm.get('carNo').hasError('minlength')">
                Pole musi mieć conajmniej 3 znaki
              </div>
            </div>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label">Ilość wolnych miejsc</label>
          <div class="col-sm-8">
            <input type="text" readonly name="freeSpace" class="form-control-plaintext"
                   value="{{this.route.routeDetails[0].freeSpace}}">
          </div>
        </div>

        <div class="row" *ngIf="showLoader">
          <progressbar max="100" [value]="100" type="info" [striped]="true" [animate]="true">Trwa zapisywanie
          </progressbar>
        </div>
        <div class="row" *ngIf="showSuccessInfo">
          <div class="alert alert-success offset-md-4" role="alert">
            Poprawnie zmieniono ofertę przejazdu. <br> Za chwile nastąpi przekierowanie do listy oferowanych przejazdów.
          </div>
        </div>
        <div class="row" *ngIf="showErrors">
          <div class="alert alert-danger offset-md-4" role="alert">
            Wystąpił błąd w trakcie zapisu formularza. Spróbuj ponownie.
          </div>
        </div>
        <div class="container">
          <div class="row two-button">
            <div class="col-4">
              <button type="button" class="btn btn-link pull-left" [routerLink]="['/user-routes']">&larr;Wstecz</button>
            </div>
            <div class="col-4">
              <button type="submit" class="save-user-route-btn" [disabled]="blockEditBtn" (click)="formSubmit()">Zapisz</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
